{"version":3,"sources":["components/image-viewer/Pointer.js","components/image-viewer/Loading.js","components/image-viewer/ImageContainer.js","components/image-viewer/ListContainer.js","components/image-viewer/ImageViewer.js","components/image-viewer/index.js","App.js","serviceWorker.js","index.js","components/image-viewer/tween.js"],"names":["Pointer","_this$props","this","props","_this$props$length","length","_this$props$changeInd","changeIndex","_this$props$index","index","i","items","push","react_default","a","createElement","className","concat","onClick","bind","key","Component","Loading","setScope","value","min","max","getDistanceBetweenTouches","e","touches","x1","clientX","y1","clientY","x2","y2","Math","sqrt","pow","ImageContainer","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loadImg","url","img","Image","src","onload","onLoad","onerror","onError","setState","isLoaded","callHandleMove","diffX","isCalledHandleStart","handleStart","handleMove","callHandleEnd","isAllowChange","handleEnd","actualHeight","actualWith","originHeight","originWidth","originScale","startLeft","startTop","startScale","onTouchStartTime","isTwoFingerMode","oldPointLeft","oldPointTop","_touchZoomDistanceStart","haveCallMoveFn","diffY","animationID","animateStartTime","animateStartValue","x","y","animateFinalValue","state","width","height","scale","left","top","assertThisInitialized","unloadImg","startAnimate","handleTouchStart","handleTouchMove","handleTouchEnd","raf","cancel","screenHeight","screenWidth","parseInt","originTop","event","targetEvent","startX","startY","debug","console","info","Date","now","middlePointClientLeft","abs","round","middlePointClientTop","_this2","_this$state","newTop","newLeft","_touchZoomDistanceEnd","zoom","_this3","touchLen","prevState","maxZoomNum","diffTime","lastTouchEndTime","onClose","Function","setTimeout","_this4","curTime","tween","easeOutQuart","_this$props2","divLeft","_this$state2","ImageStyle","translate","WebkitTransform","transform","defaultStyle","onTouchStart","onTouchMove","onTouchEnd","style","alt","image_viewer_Loading","PureComponent","ListContainer","isNeedSpring","easing","urls","gap","perDistance","maxLeft","nextProps","distance","t","d","sin","PI","startTime","getTime","nDiffx","speed","duration","WebkitTransitionDuration","transitionDuration","map","item","image_viewer_ImageContainer","document","documentElement","clientWidth","clientHeight","ImageViewer","zIndex","footer","f","r","React","isValidElement","getFooter","image_viewer_ListContainer","image_viewer_Pointer","image_viewer","options","arguments","undefined","_options$maxZoomNum","_options$zIndex","_options$index","_options$urls","_options$gap","_options$speed","_options$onClose","_options$getContainer","getContainer","body","_options$footer","_options$debug","_options$strict","strict","$node","$container","handleTouchmove","preventDefault","isObjectLike","nodeType","toString","getTag","proto","isPlainObject","warn","Error","appendChild","addEventListener","passive","Array","isArray","ReactDOM","render","ImageViewer_ImageViewer","removeEventListener","remove","prototype","App","preview","__preview","viewer","Boolean","window","location","hostname","match","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister","tweenFunctions","linear","b","_c","easeInQuad","easeOutQuad","easeInOutQuad","c","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","p","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","module","exports"],"mappings":"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","file":"static/js/main.bc257369.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nclass Pointer extends Component {\n  render() {\n    const { length = 1, changeIndex = () => {}, index = 0 } = this.props;\n\n    let i = 0,\n      items = [];\n    if (length >= 6) {\n      items.push(\n        <div className=\"viewer-container__pointer-box__nums\">{`${index + 1}/${length}`}</div>\n      )\n    } else {\n      for (i; i < length; i++) {\n        if (i === index) {\n          items.push(\n            <span onClick={changeIndex.bind(null, i)} key={i} className=\"viewer-container__pointer-box__pointer on\" />\n          );\n        } else {\n          items.push(\n            <span onClick={changeIndex.bind(null, i)} key={i} className=\"viewer-container__pointer-box__pointer\" />\n          );\n        }\n      }\n    }\n\n\n    return <div className=\"viewer-container__pointer-box\">{items}</div>;\n  }\n}\n\nexport default Pointer;\n","import React from 'react';\n\nconst Loading = () => {\n  return <div className=\"viewer-container__viewer-image-loading\" />;\n};\n\nexport default Loading;\n","/* eslint max-len: [0] */\nimport React, { PureComponent } from 'react';\nimport raf from 'raf';\nimport tween from './tween.js';\nimport Loading from './Loading';\n\n/**\n *\n * @param {number} value\n * @param {number} min\n * @param {number} max\n */\nfunction setScope(value, min, max) {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n}\n\nfunction getDistanceBetweenTouches(e) {\n  if (e.touches.length < 2) return 1;\n  const x1 = e.touches[0].clientX;\n  const y1 = e.touches[0].clientY;\n  const x2 = e.touches[1].clientX;\n  const y2 = e.touches[1].clientY;\n  const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n  return distance;\n}\n\n// const msPerFrame = 1000 / 60;\nconst maxAnimateTime = 1000;\nconst minTapMoveValue = 5;\nconst maxTapTimeValue = 300;\nconst doubleTapTimeValue = 500;\n\n/**\n * 图片默认展示模式：宽度等于屏幕宽度，高度等比缩放；水平居中，垂直居中或者居顶（当高度大于屏幕高度时）\n * 图片实际尺寸： actualWith, actualHeight\n * 图片初始尺寸： originWidth, originHeight\n * 坐标位置：left, top\n * 放大倍数：zoom\n * 最大放大倍数：maxZoomNum\n * 坐标关系：-(maxZoomNum - 1) * originWidth / 2 < left < 0\n *         -(maxZoomNum - 1) * originHeight / 2 < top < 0\n * 尺寸关系：width = zoom * originWidth\n *         heigth = zoom * originHeight\n *\n * 放大点位置关系：\n * 初始点位置：oldPointLeft, oldPointTop\n * 放大后位置：newPointLeft, newPointTop\n * 对应关系： newPointLeft = zoom * oldPointLeft\n *          newPointTop = zoom * oldPointTop\n *\n * 坐标位置：-1*left = -1*startLeft + (newPointLeft - oldPointLeft) =-1*startLeft (zoom - 1) * oldPointLeft\n *         -1*top = -1*startTop + (newPointTop - oldPointTop) =-1*startLeft (zoom - 1) * oldPointTop\n * =>\n * left = startLeft + (1 - zoom) * oldPointLeft\n * top = startTop + (1 - zoom) * oldPointTop\n */\n\nclass ImageContainer extends PureComponent {\n  constructor() {\n    super();\n    this.actualHeight = 0; // 图片实际高度\n    this.actualWith = 0; // 图片实际宽度\n\n    this.originHeight = 0; // 图片默认展示模式下高度\n    this.originWidth = 0; // 图片默认展示模式下宽度\n    this.originScale = 1; // 图片初始缩放比例\n\n    this.startLeft = 0; // 开始触摸操作时的 left 值\n    this.startTop = 0; // 开始触摸操作时的 top 值\n    this.startScale = 1; // 开始缩放操作时的 scale 值\n\n    this.onTouchStartTime = 0; // 单指触摸开始时间\n\n    this.isTwoFingerMode = false; // 是否为双指模式\n    this.oldPointLeft = 0; // 计算手指中间点在图片上的位置（坐标值）\n    this.oldPointTop = 0; // 计算手指中间点在图片上的位置（坐标值）\n    this._touchZoomDistanceStart = 0; // 用于记录双指距离\n    this.haveCallMoveFn = false;\n\n    this.diffX = 0; // 记录最后 move 事件 移动距离\n    this.diffY = 0; // 记录最后 move 事件 移动距离\n\n    this.animationID = 0;\n    this.animateStartTime = 0;\n    this.animateStartValue = {\n      x: 0,\n      y: 0\n    };\n    this.animateFinalValue = {\n      x: 0,\n      y: 0\n    };\n\n    this.state = {\n      width: 0,\n      height: 0,\n      scale: 1,\n      left: 0,\n      top: 0,\n      isLoaded: false\n    };\n    this.onLoad = this.onLoad.bind(this);\n    this.onError = this.onError.bind(this);\n    this.unloadImg = this.unloadImg.bind(this);\n    this.startAnimate = this.startAnimate.bind(this);\n    this.handleTouchStart = this.handleTouchStart.bind(this);\n    this.handleTouchMove = this.handleTouchMove.bind(this);\n    this.handleTouchEnd = this.handleTouchEnd.bind(this);\n  }\n\n  componentWillMount() {\n    this.loadImg(this.props.src);\n  }\n\n  componentWillUnmount() {\n    this.unloadImg();\n    if (this.animationID) {\n      raf.cancel(this.animationID);\n    }\n  }\n\n  onLoad() {\n    this.actualWith = this.img.width;\n    this.actualHeight = this.img.height;\n\n    const { screenHeight, screenWidth } = this.props;\n\n    const left = 0;\n    let top = 0;\n\n    this.originWidth = screenWidth;\n    this.originHeight = (this.actualHeight / this.actualWith) * screenWidth;\n    this.originScale = 1;\n\n    if (this.actualHeight / this.actualWith < screenHeight / screenWidth) {\n      top = parseInt((screenHeight - this.originHeight) / 2, 10);\n    }\n    this.originTop = top;\n\n    this.setState({\n      width: this.originWidth,\n      height: this.originHeight,\n      scale: 1,\n      left,\n      top,\n      isLoaded: true\n    });\n  }\n\n  onError() {\n    this.setState({\n      isLoaded: true\n    });\n  }\n\n  loadImg = url => {\n    this.img = new Image();\n    this.img.src = url;\n    this.img.onload = this.onLoad;\n    this.img.onerror = this.onError;\n\n    this.setState({\n      isLoaded: false\n    });\n  };\n\n  unloadImg() {\n    delete this.img.onerror;\n    delete this.img.onload;\n    delete this.img.src;\n    delete this.img;\n  }\n\n  handleTouchStart(event) {\n    if (this.animationID) {\n      raf.cancel(this.animationID);\n    }\n    switch (event.touches.length) {\n      case 1: {\n        const targetEvent = event.touches[0];\n        this.startX = targetEvent.clientX;\n        this.startY = targetEvent.clientY;\n        this.diffX = 0;\n        this.diffY = 0;\n\n        this.startLeft = this.state.left;\n        this.startTop = this.state.top;\n\n        this.props.debug &&\n          console.info(\n            'handleTouchStart this.startX = %s, this.startY = %s, this.startLeft = %s, this.startTop = %s',\n            this.startX,\n            this.startY,\n            this.startLeft,\n            this.startTop\n          );\n        this.onTouchStartTime = Date.now();\n        this.haveCallMoveFn = false;\n        break;\n      }\n      case 2: {\n        // 两个手指\n        // 设置手双指模式\n        this.isTwoFingerMode = true;\n\n        // 计算两个手指中间点屏幕上的坐标\n        const middlePointClientLeft = Math.abs(Math.round((event.touches[0].clientX + event.touches[1].clientX) / 2));\n        const middlePointClientTop = Math.abs(Math.round((event.touches[0].clientY + event.touches[1].clientY) / 2));\n\n        // 保存图片初始位置和尺寸\n        this.startLeft = this.state.left;\n        this.startTop = this.state.top;\n        this.startScale = this.state.scale;\n\n        // 计算手指中间点在图片上的位置（坐标值）\n        this.oldPointLeft = middlePointClientLeft - this.startLeft;\n        this.oldPointTop = middlePointClientTop - this.startTop;\n\n        this._touchZoomDistanceStart = getDistanceBetweenTouches(event);\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  handleTouchMove(event) {\n    switch (event.touches.length) {\n      case 1: {\n        const targetEvent = event.touches[0];\n        const diffX = targetEvent.clientX - this.startX;\n        const diffY = targetEvent.clientY - this.startY;\n\n        this.diffX = diffX;\n        this.diffY = diffY;\n        this.props.debug && console.info('handleTouchMove one diffX=%s, diffY=%s', diffX, diffY);\n        // 判断是否为点击\n        if (Math.abs(diffX) < minTapMoveValue && Math.abs(diffY) < minTapMoveValue) {\n          return;\n        }\n\n        const { scale, left } = this.state;\n        const width = scale * this.originWidth;\n        if (Math.abs(diffX) > Math.abs(diffY)) {\n          // 水平移动\n          if (this.state.scale === this.originScale && Math.abs(diffX) > minTapMoveValue) {\n            this.haveCallMoveFn = true;\n            this.callHandleMove(diffX);\n            return;\n          }\n\n          this.props.debug &&\n            console.info(\n              'handleMove one left=%s, this.startLeft=%s,this.originWidth=%s, width=%s',\n              left,\n              this.startLeft,\n              this.originWidth,\n              width\n            );\n          if (diffX < 0 && this.startLeft <= this.originWidth - width) {\n            this.haveCallMoveFn = true;\n            this.callHandleMove(diffX);\n            return;\n          }\n\n          if (diffX > 0 && this.startLeft >= 0) {\n            this.haveCallMoveFn = true;\n            this.callHandleMove(diffX);\n            return;\n          }\n        }\n\n        const { screenHeight } = this.props;\n        const height = scale * this.originHeight;\n        let newTop = (screenHeight - height) / 2;\n        const newLeft = this.startLeft + diffX;\n\n        if (height > screenHeight || this.state.scale === this.originScale) {\n          newTop = this.startTop + diffY;\n        }\n        this.props.debug && console.info('handleTouchMove one newLeft=%s, newTop=%s', newLeft, newTop);\n        this.setState({\n          left: newLeft,\n          top: newTop\n        });\n\n        break;\n      }\n      case 2: {\n        // 两个手指\n        this._touchZoomDistanceEnd = getDistanceBetweenTouches(event);\n\n        const zoom = Math.sqrt(this._touchZoomDistanceEnd / this._touchZoomDistanceStart);\n        const scale = zoom * this.startScale;\n\n        this.setState(() => {\n          const left = this.startLeft + (1 - zoom) * this.oldPointLeft;\n          const top = this.startTop + (1 - zoom) * this.oldPointTop;\n\n          this.props.debug && console.info('zoom = %s, left = %s, top = %s, scale', zoom, left, top, scale);\n          return {\n            left,\n            top,\n            scale\n          };\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  handleTouchEnd(event) {\n    if (this.isTwoFingerMode) {\n      // 双指操作结束\n      const touchLen = event.touches.length;\n      this.isTwoFingerMode = false;\n\n      if (touchLen === 1) {\n        const targetEvent = event.touches[0];\n        this.startX = targetEvent.clientX;\n        this.startY = targetEvent.clientY;\n        this.diffX = 0;\n        this.diffY = 0;\n      }\n\n      this.setState((prevState, props) => {\n        const scale = setScope(prevState.scale, 1, props.maxZoomNum);\n        const width = scale * this.originWidth;\n        const height = scale * this.originHeight;\n        const zoom = scale / this.startScale;\n        const left = setScope(this.startLeft + (1 - zoom) * this.oldPointLeft, this.originWidth - width, 0);\n\n        let top;\n        if (height > props.screenHeight) {\n          top = setScope(this.startTop + (1 - zoom) * this.oldPointTop, props.screenHeight - height, 0);\n        } else {\n          top = (props.screenHeight - height) / 2;\n        }\n\n        if (touchLen === 1) {\n          this.startLeft = left;\n          this.startTop = top;\n          this.startScale = scale;\n          this.props.debug &&\n            console.info(\n              'this.startX = %s, this.startY = %s, this.startLeft = %s, this.startTop = %s',\n              this.startX,\n              this.startY,\n              this.startLeft,\n              this.startTop\n            );\n        }\n\n        this.props.debug &&\n          console.info('zoom = %s, left = %s, top = %s, width=%s, height= %s', zoom, left, top, width, height);\n        return {\n          left,\n          top,\n          scale\n        };\n      });\n    } else {\n      const now = Date.now();\n      // 单指结束（ontouchend）\n      const diffTime = now - this.onTouchStartTime;\n      this.lastTouchEndTime = now;\n      const { diffX, diffY } = this;\n\n      this.props.debug &&\n        console.info('handleTouchEnd one diffTime = %s, diffX = %s, diffy = %s', diffTime, diffX, diffY);\n      // 判断为点击则关闭图片浏览组件\n      if (diffTime < maxTapTimeValue && Math.abs(diffX) < minTapMoveValue && Math.abs(diffY) < minTapMoveValue) {\n        this.props.onClose instanceof Function && this.props.onClose();\n        return;\n      }\n\n      // 水平移动\n      if (this.haveCallMoveFn) {\n        const isChangeImage = this.callHandleEnd(diffY < 30);\n        if (isChangeImage) {\n          // 如果切换图片则重置当前图片状态\n          setTimeout(() => {\n            this.setState({\n              scale: this.originScale,\n              left: 0,\n              top: this.originTop\n            });\n          }, maxAnimateTime / 3);\n          return;\n        }\n      }\n      // TODO: 下拉移动距离超过屏幕高度的 1/3 则关闭\n      this.props.debug && console.info(Math.abs(diffY) > this.props.screenHeight / 2, this.startTop, this.originTop);\n      if (\n        Math.abs(diffX) < Math.abs(diffY) &&\n        Math.abs(diffY) > this.props.screenHeight / 3 &&\n        this.startTop === this.originTop\n      ) {\n        this.props.onClose instanceof Function && this.props.onClose();\n        return;\n      }\n\n      let x;\n      let y;\n      const { scale } = this.state;\n      // const width = scale * this.originWidth;\n      const height = scale * this.originHeight;\n\n      // 使用相同速度算法\n      x = (diffX * maxAnimateTime) / diffTime + this.startLeft;\n      y = (diffY * maxAnimateTime) / diffTime + this.startTop;\n\n      if (this.state.scale === this.originScale) {\n        x = 0;\n        if (height > this.props.screenHeight) {\n          y = setScope(y, this.props.screenHeight - height, 0);\n        } else {\n          y = this.originTop;\n        }\n      }\n\n      // x = setScope(x, this.originWidth - width, 0);\n\n      // if (height > this.props.screenHeight) {\n      // y = setScope(y, this.props.screenHeight - height, 0);\n      // } else {\n      //   y = this.state.top;\n      // }\n\n      this.animateStartValue = {\n        x: this.state.left,\n        y: this.state.top\n      };\n      this.animateFinalValue = {\n        x,\n        y\n      };\n      this.animateStartTime = Date.now();\n      this.startAnimate();\n    }\n  }\n\n  startAnimate() {\n    this.animationID = raf(() => {\n      // calculate current time\n      const curTime = Date.now() - this.animateStartTime;\n      let left;\n      let top;\n\n      // animate complete\n      if (curTime > maxAnimateTime) {\n        this.setState((prevState, props) => {\n          const width = prevState.scale * this.originWidth;\n          const height = prevState.scale * this.originHeight;\n          left = setScope(prevState.left, this.originWidth - width, 0);\n\n          if (height > props.screenHeight) {\n            top = setScope(prevState.top, props.screenHeight - height, 0);\n          } else {\n            top = (props.screenHeight - height) / 2;\n          }\n          this.props.debug && console.info('end animate left= %s, top = %s', left, top);\n          return {\n            left,\n            top\n          };\n        });\n      } else {\n        left = tween.easeOutQuart(curTime, this.animateStartValue.x, this.animateFinalValue.x, maxAnimateTime);\n        top = tween.easeOutQuart(curTime, this.animateStartValue.y, this.animateFinalValue.y, maxAnimateTime);\n\n        this.props.debug && console.info('startAnimate left= %s, top = %s, curTime = %s', left, top, curTime);\n        this.setState({\n          left,\n          top\n        });\n        this.startAnimate();\n      }\n    });\n  }\n\n  callHandleMove = diffX => {\n    if (!this.isCalledHandleStart) {\n      this.isCalledHandleStart = true;\n      if (this.props.handleStart) {\n        this.props.handleStart();\n      }\n    }\n    this.props.handleMove(diffX);\n  };\n\n  callHandleEnd = isAllowChange => {\n    if (this.isCalledHandleStart) {\n      this.isCalledHandleStart = false;\n      if (this.props.handleEnd) {\n        return this.props.handleEnd(isAllowChange);\n      }\n    }\n  };\n\n  render() {\n    const { screenWidth, screenHeight, src, left: divLeft } = this.props;\n    const { isLoaded, left, top, scale, width, height } = this.state;\n\n    const ImageStyle = {\n      width,\n      height\n    };\n\n    const translate = `translate3d(${left}px, ${top}px, 0) scale(${scale})`;\n    ImageStyle.WebkitTransform = translate;\n    ImageStyle.transform = translate;\n\n    const defaultStyle = {\n      left: divLeft,\n      width: screenWidth,\n      height: screenHeight\n    };\n    return (\n      <div\n        className=\"viewer-container__viewer-image-container\"\n        onTouchStart={this.handleTouchStart}\n        onTouchMove={this.handleTouchMove}\n        onTouchEnd={this.handleTouchEnd}\n        style={defaultStyle}\n      >\n        {isLoaded ? <img src={src} style={ImageStyle} alt=\"图片预览\" /> : <Loading />}\n      </div>\n    );\n  }\n}\n\nexport default ImageContainer;\n","import React, { PureComponent } from 'react';\n\nimport ImageContainer from './ImageContainer';\n\n// 快速拖动时间限制\nconst DEFAULT_TIME_DIFF = 200;\n\nclass ListContainer extends PureComponent {\n  constructor() {\n    super();\n    this.isNeedSpring = false;\n\n    this.state = {\n      left: 0\n    };\n\n    this.easing = this.easing.bind(this);\n    this.handleStart = this.handleStart.bind(this);\n    this.handleMove = this.handleMove.bind(this);\n    this.handleEnd = this.handleEnd.bind(this);\n  }\n\n  componentWillMount() {\n    const { screenWidth, urls, index, gap } = this.props;\n\n    this.length = urls.length;\n    this.perDistance = screenWidth + gap;\n    this.maxLeft = this.perDistance * (this.length - 1);\n    this.isNeedSpring = false;\n\n    this.setState({\n      left: -this.perDistance * index\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.index !== nextProps.index) {\n      this.isNeedSpring = true;\n      this.setState({\n        left: -this.perDistance * nextProps.index\n      });\n    }\n  }\n\n  /**\n   * 拖拽的缓动公式 - easeOutSine\n   * Link http://easings.net/zh-cn#\n   * t: current time（当前时间）；\n   * b: beginning value（初始值）；\n   * c: change in value（变化量）；\n   * d: duration（持续时间）。\n   */\n  easing(distance) {\n    const t = distance;\n    const b = 0;\n    const d = this.props.screenWidth; // 允许拖拽的最大距离\n    const c = d / 2.5; // 提示标签最大有效拖拽距离\n\n    return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n  }\n\n  handleStart() {\n    this.props.debug && console.info('ListContainer handleStart');\n    this.startLeft = this.state.left;\n    this.startTime = new Date().getTime();\n    this.isNeedSpring = false;\n  }\n\n  handleMove(diffX) {\n    this.props.debug && console.info('ListContainer handleStart diffX = %s', diffX);\n    let nDiffx = diffX;\n    // 限制最大 diffx 值\n    if (Math.abs(nDiffx) > this.props.screenWidth) {\n      if (nDiffx < 0) {\n        nDiffx = -this.props.screenWidth;\n      }\n      if (nDiffx > 0) {\n        nDiffx = this.props.screenWidth;\n      }\n    }\n\n    if (this.state.left >= 0 && nDiffx > 0) {\n      nDiffx = this.easing(nDiffx);\n    } else if (this.state.left <= -this.maxLeft && nDiffx < 0) {\n      nDiffx = -this.easing(-nDiffx);\n    }\n\n    this.setState({\n      left: this.startLeft + nDiffx\n    });\n  }\n\n  handleEnd(isAllowChange) {\n    let index;\n    const diffTime = new Date().getTime() - this.startTime;\n    this.props.debug && console.info('handleEnd %s', isAllowChange, diffTime, this.state.left, this.startLeft, this.props.index);\n    // 快速拖动情况下切换图片\n    if (isAllowChange && diffTime < DEFAULT_TIME_DIFF) {\n      if (this.state.left < this.startLeft) {\n        index = this.props.index + 1;\n      } else {\n        index = this.props.index - 1;\n      }\n    } else {\n      index = Math.abs(Math.round(this.state.left / this.perDistance));\n    }\n\n    // 处理边界情况\n    if (index < 0) {\n      index = 0;\n    } else if (index > this.length - 1) {\n      index = this.length - 1;\n    }\n\n    this.setState({\n      left: -this.perDistance * index\n    });\n    this.isNeedSpring = true;\n    if (index !== this.props.index) {\n      this.props.changeIndex(index);\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const { maxZoomNum, screenWidth, screenHeight, urls, speed, onClose, debug } = this.props;\n\n    const { left } = this.state;\n\n    const defaultStyle = {};\n\n    if (this.isNeedSpring) {\n      const duration = `${speed}ms`;\n      defaultStyle.WebkitTransitionDuration = duration;\n      defaultStyle.transitionDuration = duration;\n    }\n    const translate = `translate3d(${left}px, 0, 0)`;\n    defaultStyle.WebkitTransform = translate;\n    defaultStyle.transform = translate;\n\n    return (\n      <div className=\"viewer-container__viewer-list-container\" style={defaultStyle}>\n        {/* 这里使用 index 作为 key，是因为可能存在同一张图片在预览中 */\n        urls.map((item, i) => (\n          <ImageContainer\n            key={i} // eslint-disable-line\n            src={item}\n            debug={debug}\n            maxZoomNum={maxZoomNum}\n            handleStart={this.handleStart}\n            handleMove={this.handleMove}\n            handleEnd={this.handleEnd}\n            onClose={onClose}\n            left={this.perDistance * i}\n            screenWidth={screenWidth}\n            screenHeight={screenHeight}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default ListContainer;\n","import React from 'react';\nimport Pointer from './Pointer';\nimport ListContainer from './ListContainer';\n\nimport './ImageViewer.css';\n\nconst screenWidth = typeof document !== 'undefined' && document.documentElement.clientWidth;\nconst screenHeight = typeof document !== 'undefined' && document.documentElement.clientHeight;\n\nexport default class ImageViewer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      index: props.index || 0\n    };\n    this.changeIndex = this.changeIndex.bind(this);\n  }\n\n  changeIndex(index) {\n    this.setState({ index });\n  }\n\n  render() {\n    const { maxZoomNum, zIndex, urls, gap, speed, onClose, footer, debug, screenWidth: width, screenHeight: height } = this.props;\n    const { index } = this.state;\n\n    // 获取底部元素\n    function getFooter() {\n      if (!footer) {\n        return null;\n      }\n      if (footer instanceof Function) {\n        const r = footer();\n        return React.isValidElement(r) ? r : null;\n      }\n      if (React.isValidElement(footer)) {\n        return footer;\n      }\n\n      return null;\n    }\n\n    const f = getFooter();\n\n    return (\n      <div className=\"fly-component-image-viewer-container\" style={{ zIndex }}>\n        <div className=\"viewer-container__cover\" />\n        <ListContainer\n          screenWidth={width || screenWidth}\n          screenHeight={height || screenHeight}\n          changeIndex={this.changeIndex}\n          onClose={onClose}\n          debug={debug}\n          urls={urls}\n          maxZoomNum={maxZoomNum}\n          gap={gap}\n          speed={speed}\n          index={index}\n        />\n        {f ? (\n          <div className=\"viewer-container__pointer-box\">{f}</div>\n        ) : (\n          <Pointer length={urls.length} index={index} changeIndex={this.changeIndex} />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Viewer from './ImageViewer';\n\n// 不推荐；直接导出，提供不同的使用方式\nexport const ImageViewer = Viewer;\n\n// todo: cover-class, container-class, footer-class\n// 推荐！\nexport default (options = {}) => {\n  const {\n    maxZoomNum = 5, // 最大放大倍数\n    zIndex = 100, // 组件图层深度\n    index = 0, // 当前显示图片的http链接\n    urls = [], // 需要预览的图片http链接列表\n    gap = 10, // 间隙\n    speed = 300, // Duration of transition between slides (in ms)\n    onClose = () => {}, // 关闭组件回调\n    getContainer = () => document.body, // 容器\n    footer = null, // 底部节点\n    debug = false, // 是否打印开发日志\n    screenWidth, // 屏幕宽 document.documentElement.clientWidth\n    screenHeight, // 屏幕高 document.documentElement.clientHeight\n    strict = true // 严格操作模式，开启将禁止 safari 的橡皮筋效果\n  } = options;\n  let $node = document.createElement('div');\n  let $container = getContainer();\n  if (!isElement($container)) {\n    console.warn(new Error('getContainer 函数的返回值应该是 DOM element.')); // eslint-disable-line\n    $container = document.body;\n  }\n  $container.appendChild($node);\n\n  // 严格操作模式，开启将禁止 safari 的橡皮筋效果\n  strict && document.body.addEventListener('touchmove', handleTouchmove, { passive: false }); //passive 参数不能省略，用来兼容ios和android\n\n  // 渲染节点\n  if (Array.isArray(urls) && urls.length > 0) {\n    ReactDOM.render(\n      <Viewer\n        maxZoomNum={maxZoomNum}\n        zIndex={zIndex}\n        index={index}\n        urls={urls}\n        gap={gap}\n        speed={speed}\n        debug={debug}\n        onClose={handleClose}\n        footer={footer}\n        screenWidth={screenWidth}\n        screenHeight={screenHeight}\n      />,\n      $node\n    );\n  }\n\n  // 预览结束\n  function handleClose() {\n    onClose instanceof Function && onClose();\n    strict && document.body.removeEventListener('touchmove', handleTouchmove, { passive: false });\n    if ($node) {\n      $node.remove();\n      $node = null;\n    }\n  }\n\n  // iOS safari 阻止“橡皮筋效果”\n  function handleTouchmove(e) {\n    e.preventDefault(); //阻止默认的处理方式(阻止下拉滑动的效果)\n  }\n};\n\n// 判断是否是 DOM element, 来自 lodash https://github.com/lodash/lodash/blob/master/isElement.js\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nfunction isObjectLike(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n}\n\nconst toString = Object.prototype.toString;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction getTag(value) {\n  if (value == null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n  return toString.call(value);\n}\n","import React from 'react';\nimport viewer from './components/image-viewer/index';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.preview = this.preview.bind(this);\n  }\n  componentDidMount() {\n    this.__preview();\n  }\n  preview() {\n    this.__preview();\n  }\n  // 预览图片\n  __preview() {\n    viewer({\n      urls: ['/assets/pexels-photo-273222.jpeg', '/assets/antd-pro.png', '/assets/pexels-photo-273222.jpeg', '/assets/antd-pro.png', '/assets/pexels-photo-273222.jpeg', '/assets/antd-pro.png', ]\n    });\n  }\n  render() {\n    return (\n      <center>\n        <h1 onClick={this.preview}>点击预览</h1>\n      </center>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();","/* eslint-disable */\n'use strict';\n/**\n * t: current time（当前时间）；\n * b: beginning value（初始值）；\n * c: change in value（变化量）；\n * _c: final value (最后值)\n * d: duration（持续时间）。\n */\nvar tweenFunctions = {\n  linear: function(t, b, _c, d) {\n    var c = _c - b;\n    return (c * t) / d + b;\n  },\n  easeInQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t + b;\n  },\n  easeOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  easeInOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * t * t + b;\n    } else {\n      return (-c / 2) * (--t * (t - 2) - 1) + b;\n    }\n  },\n  easeInCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t + b;\n  },\n  easeOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  },\n  easeInOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * t * t * t + b;\n    } else {\n      return (c / 2) * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  easeInQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t + b;\n  },\n  easeOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  },\n  easeInOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * t * t * t * t + b;\n    } else {\n      return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  easeInQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  easeOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  easeInOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * t * t * t * t * t + b;\n    } else {\n      return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  easeInSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;\n  },\n  easeOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n  },\n  easeInOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;\n  },\n  easeInExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return t == 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  },\n  easeOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return t == d ? b + c : c * (-Math.pow(2, (-10 * t) / d) + 1) + b;\n  },\n  easeInOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;\n    } else {\n      return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  easeInCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  easeOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  },\n  easeInOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;\n    } else {\n      return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  easeInElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = (p / (2 * Math.PI)) * Math.asin(c / a);\n    }\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n  },\n  easeOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = (p / (2 * Math.PI)) * Math.asin(c / a);\n    }\n    return a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) + c + b;\n  },\n  easeInOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = (p / (2 * Math.PI)) * Math.asin(c / a);\n    }\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n    } else {\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) * 0.5 + c + b;\n    }\n  },\n  easeInBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  easeOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  easeInOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    if ((t /= d / 2) < 1) {\n      return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    } else {\n      return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    }\n  },\n  easeInBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    v = tweenFunctions.easeOutBounce(d - t, 0, c, d);\n    return c - v + b;\n  },\n  easeOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  easeInOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    if (t < d / 2) {\n      v = tweenFunctions.easeInBounce(t * 2, 0, c, d);\n      return v * 0.5 + b;\n    } else {\n      v = tweenFunctions.easeOutBounce(t * 2 - d, 0, c, d);\n      return v * 0.5 + c * 0.5 + b;\n    }\n  }\n};\n\nmodule.exports = tweenFunctions;\n"],"sourceRoot":""}